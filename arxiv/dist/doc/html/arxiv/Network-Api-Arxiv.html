<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Network.Api.Arxiv</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Network-Api-Arxiv.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">arxiv-0.0.1: A client for the Arxiv API</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Portability</th><td>portable</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr></table><p class="caption">Network.Api.Arxiv</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Request 
</a></li><li><a href="#g:2">Expression Example
</a></li><li><a href="#g:3">Queries
</a></li><li><a href="#g:4">Response
</a></li><li><a href="#g:5">A complete Example using http-conduit
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc empty">&nbsp;</div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:baseUrl">baseUrl</a> :: String</li><li class="src short"><a href="#v:apiUrl">apiUrl</a> :: String</li><li class="src short"><a href="#v:apiQuery">apiQuery</a> :: String</li><li class="src short"><span class="keyword">data</span>  <a href="#t:Field">Field</a> <ul class="subs"><li>= <a href="#v:Ti">Ti</a> [Term]  </li><li>| <a href="#v:Au">Au</a> [Term]  </li><li>| <a href="#v:Abs">Abs</a> [Term]  </li><li>| <a href="#v:Co">Co</a> [Term]  </li><li>| <a href="#v:Jr">Jr</a> [Term]  </li><li>| <a href="#v:Cat">Cat</a> [Term]  </li><li>| <a href="#v:Rn">Rn</a> [Term]  </li><li>| <a href="#v:Id">Id</a> [Term]  </li><li>| <a href="#v:All">All</a> [Term]  </li></ul></li><li class="src short"><span class="keyword">data</span>  <a href="#t:Expression">Expression</a> <ul class="subs"><li>= <a href="#v:Exp">Exp</a> <a href="Network-Api-Arxiv.html#t:Field">Field</a>  </li><li>| <a href="#v:And">And</a> <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> <a href="Network-Api-Arxiv.html#t:Expression">Expression</a>  </li><li>| <a href="#v:Or">Or</a> <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> <a href="Network-Api-Arxiv.html#t:Expression">Expression</a>  </li><li>| <a href="#v:AndNot">AndNot</a> <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> <a href="Network-Api-Arxiv.html#t:Expression">Expression</a>  </li></ul></li><li class="src short"><a href="#v:-47--42--47-">(/*/)</a> :: <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> -&gt; <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> -&gt; <a href="Network-Api-Arxiv.html#t:Expression">Expression</a></li><li class="src short"><a href="#v:-47--43--47-">(/+/)</a> :: <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> -&gt; <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> -&gt; <a href="Network-Api-Arxiv.html#t:Expression">Expression</a></li><li class="src short"><a href="#v:-47--45--47-">(/-/)</a> :: <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> -&gt; <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> -&gt; <a href="Network-Api-Arxiv.html#t:Expression">Expression</a></li><li class="src short"><span class="keyword">data</span>  <a href="#t:Query">Query</a>  = <a href="#v:Query">Query</a> {<ul class="subs"><li><a href="#v:qExp">qExp</a> :: Maybe <a href="Network-Api-Arxiv.html#t:Expression">Expression</a></li><li><a href="#v:qIds">qIds</a> :: [Identifier]</li><li><a href="#v:qStart">qStart</a> :: Int</li><li><a href="#v:qItems">qItems</a> :: Int</li></ul>}</li><li class="src short"><a href="#v:nextPage">nextPage</a> :: <a href="Network-Api-Arxiv.html#t:Query">Query</a> -&gt; <a href="Network-Api-Arxiv.html#t:Query">Query</a></li><li class="src short"><a href="#v:parseQuery">parseQuery</a> :: String -&gt; Either String <a href="Network-Api-Arxiv.html#t:Expression">Expression</a></li><li class="src short"><a href="#v:preprocess">preprocess</a> :: String -&gt; String</li><li class="src short"><a href="#v:parseIds">parseIds</a> :: String -&gt; [Identifier]</li><li class="src short"><a href="#v:mkQuery">mkQuery</a> :: <a href="Network-Api-Arxiv.html#t:Query">Query</a> -&gt; String</li><li class="src short"><a href="#v:exp2str">exp2str</a> :: <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> -&gt; String</li><li class="src short"><a href="#v:items2str">items2str</a> :: <a href="Network-Api-Arxiv.html#t:Query">Query</a> -&gt; String</li><li class="src short"><a href="#v:ids2str">ids2str</a> :: [Identifier] -&gt; String</li><li class="src short"><a href="#v:itemControl">itemControl</a> :: Int -&gt; Int -&gt; String</li><li class="src short"><a href="#v:totalResults">totalResults</a> :: [Tag String] -&gt; Int</li><li class="src short"><a href="#v:startIndex">startIndex</a> :: [Tag String] -&gt; Int</li><li class="src short"><a href="#v:itemsPerPage">itemsPerPage</a> :: [Tag String] -&gt; Int</li><li class="src short"><a href="#v:getEntry">getEntry</a> :: [Tag String] -&gt; ([Tag String], [Tag String])</li><li class="src short"><a href="#v:forEachEntry">forEachEntry</a> ::  [Tag String] -&gt; ([Tag String] -&gt; r) -&gt; [r]</li><li class="src short"><a href="#v:forEachEntryM">forEachEntryM</a> :: Monad m =&gt; [Tag String] -&gt; ([Tag String] -&gt; m r) -&gt; m [r]</li><li class="src short"><a href="#v:forEachEntryM_">forEachEntryM_</a> :: Monad m =&gt; [Tag String] -&gt; ([Tag String] -&gt; m ()) -&gt; m ()</li><li class="src short"><a href="#v:checkForError">checkForError</a> :: [Tag String] -&gt; Either String ()</li><li class="src short"><a href="#v:exhausted">exhausted</a> :: [Tag String] -&gt; Bool</li><li class="src short"><a href="#v:getId">getId</a> :: [Tag String] -&gt; String</li><li class="src short"><a href="#v:getIdUrl">getIdUrl</a> :: [Tag String] -&gt; String</li><li class="src short"><a href="#v:getUpdated">getUpdated</a> :: [Tag String] -&gt; String</li><li class="src short"><a href="#v:getPublished">getPublished</a> :: [Tag String] -&gt; String</li><li class="src short"><a href="#v:getYear">getYear</a> :: [Tag String] -&gt; String</li><li class="src short"><a href="#v:getTitle">getTitle</a> :: [Tag String] -&gt; String</li><li class="src short"><a href="#v:getSummary">getSummary</a> :: [Tag String] -&gt; String</li><li class="src short"><a href="#v:getComment">getComment</a> :: [Tag String] -&gt; String</li><li class="src short"><a href="#v:getJournal">getJournal</a> :: [Tag String] -&gt; String</li><li class="src short"><a href="#v:getDoi">getDoi</a> :: [Tag String] -&gt; String</li><li class="src short"><span class="keyword">data</span>  <a href="#t:Link">Link</a>  = <a href="#v:Link">Link</a> {<ul class="subs"><li><a href="#v:lnkHref">lnkHref</a> :: String</li><li><a href="#v:lnkType">lnkType</a> :: String</li><li><a href="#v:lnkTitle">lnkTitle</a> :: String</li><li><a href="#v:lnkRel">lnkRel</a> :: String</li></ul>}</li><li class="src short"><a href="#v:getLinks">getLinks</a> :: [Tag String] -&gt; [<a href="Network-Api-Arxiv.html#t:Link">Link</a>]</li><li class="src short"><a href="#v:getPdfLink">getPdfLink</a> :: [Tag String] -&gt; Maybe <a href="Network-Api-Arxiv.html#t:Link">Link</a></li><li class="src short"><a href="#v:getPdf">getPdf</a> :: [Tag String] -&gt; String</li><li class="src short"><span class="keyword">data</span>  <a href="#t:Category">Category</a>  = <a href="#v:Category">Category</a> {<ul class="subs"><li><a href="#v:catTerm">catTerm</a> :: String</li><li><a href="#v:catScheme">catScheme</a> :: String</li></ul>}</li><li class="src short"><a href="#v:getCategories">getCategories</a> :: [Tag String] -&gt; [<a href="Network-Api-Arxiv.html#t:Category">Category</a>]</li><li class="src short"><a href="#v:getPrimaryCategory">getPrimaryCategory</a> :: [Tag String] -&gt; Maybe <a href="Network-Api-Arxiv.html#t:Category">Category</a></li><li class="src short"><span class="keyword">data</span>  <a href="#t:Author">Author</a>  = <a href="#v:Author">Author</a> {<ul class="subs"><li><a href="#v:auName">auName</a> :: String</li><li><a href="#v:auFil">auFil</a> :: String</li></ul>}</li><li class="src short"><a href="#v:getAuthors">getAuthors</a> :: [Tag String] -&gt; [<a href="Network-Api-Arxiv.html#t:Author">Author</a>]</li><li class="src short"><a href="#v:getAuthorNames">getAuthorNames</a> :: [Tag String] -&gt; [String]</li></ul></div><div id="interface"><h1 id="g:1">Request 
</h1><div class="doc"><p>Requests are URL parameter,
     either &quot;search_query&quot; or &quot;id_list&quot;.
     This module provides functions
     to build and parse these parameters,
     to create the full request string
     and to navigate through a multi-page request
     with a maximum number of items per page.
</p><p>For details of the Arxiv request format,
     please refer to the Arxiv documentation.
</p></div><div class="top"><p class="src"><a name="v:baseUrl" class="def">baseUrl</a> :: String</p><div class="doc"><p>The Arxiv base URL &quot;arxiv.org&quot;
</p></div></div><div class="top"><p class="src"><a name="v:apiUrl" class="def">apiUrl</a> :: String</p><div class="doc"><p>The Arxiv API URL &quot;export.arxiv.org/api&quot;
</p></div></div><div class="top"><p class="src"><a name="v:apiQuery" class="def">apiQuery</a> :: String</p><div class="doc"><p>The query string (&quot;search_query=&quot; or &quot;id_list=&quot;)
</p></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Field" class="def">Field</a>  </p><div class="doc"><p>Field data type;
   a field consist of a field identifier
   (author, title, etc.)
   and a list of search terms.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Ti" class="def">Ti</a> [Term]</td><td class="doc"><p>Title
</p></td></tr><tr><td class="src"><a name="v:Au" class="def">Au</a> [Term]</td><td class="doc"><p>Author
</p></td></tr><tr><td class="src"><a name="v:Abs" class="def">Abs</a> [Term]</td><td class="doc"><p>Abstract
</p></td></tr><tr><td class="src"><a name="v:Co" class="def">Co</a> [Term]</td><td class="doc"><p>Comment
</p></td></tr><tr><td class="src"><a name="v:Jr" class="def">Jr</a> [Term]</td><td class="doc"><p>Journal
</p></td></tr><tr><td class="src"><a name="v:Cat" class="def">Cat</a> [Term]</td><td class="doc"><p>Category
</p></td></tr><tr><td class="src"><a name="v:Rn" class="def">Rn</a> [Term]</td><td class="doc"><p>Report Number
</p></td></tr><tr><td class="src"><a name="v:Id" class="def">Id</a> [Term]</td><td class="doc"><p>Article identifier
</p></td></tr><tr><td class="src"><a name="v:All" class="def">All</a> [Term]</td><td class="doc"><p>Any of the above
</p></td></tr></table></div><div class="subs instances"><p id="control.i:Field" class="caption collapser" onclick="toggleSection('i:Field')">Instances</p><div id="section.i:Field" class="show"><table><tr><td class="src">Eq <a href="Network-Api-Arxiv.html#t:Field">Field</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Show <a href="Network-Api-Arxiv.html#t:Field">Field</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Expression" class="def">Expression</a>  </p><div class="doc"><p>Expression data type.
   An expression is either a field or a logical connection
   of two expressions using the basic operators 
   AND, OR and ANDNOT.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Exp" class="def">Exp</a> <a href="Network-Api-Arxiv.html#t:Field">Field</a></td><td class="doc"><p>Just a field
</p></td></tr><tr><td class="src"><a name="v:And" class="def">And</a> <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> <a href="Network-Api-Arxiv.html#t:Expression">Expression</a></td><td class="doc"><p>Logical &quot;and&quot;
</p></td></tr><tr><td class="src"><a name="v:Or" class="def">Or</a> <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> <a href="Network-Api-Arxiv.html#t:Expression">Expression</a></td><td class="doc"><p>Logical &quot;or&quot;
</p></td></tr><tr><td class="src"><a name="v:AndNot" class="def">AndNot</a> <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> <a href="Network-Api-Arxiv.html#t:Expression">Expression</a></td><td class="doc"><p>Logical &quot;and . not&quot;
</p></td></tr></table></div><div class="subs instances"><p id="control.i:Expression" class="caption collapser" onclick="toggleSection('i:Expression')">Instances</p><div id="section.i:Expression" class="show"><table><tr><td class="src">Eq <a href="Network-Api-Arxiv.html#t:Expression">Expression</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Show <a href="Network-Api-Arxiv.html#t:Expression">Expression</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:-47--42--47-" class="def">(/*/)</a> :: <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> -&gt; <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> -&gt; <a href="Network-Api-Arxiv.html#t:Expression">Expression</a></p><div class="doc"><p>AND operator.
   The symbol was chosen because
   0 * 1 = 0.
</p></div></div><div class="top"><p class="src"><a name="v:-47--43--47-" class="def">(/+/)</a> :: <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> -&gt; <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> -&gt; <a href="Network-Api-Arxiv.html#t:Expression">Expression</a></p><div class="doc"><p>OR operator.
   The symbol was chosen because
   0 + 1 = 1.
</p></div></div><div class="top"><p class="src"><a name="v:-47--45--47-" class="def">(/-/)</a> :: <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> -&gt; <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> -&gt; <a href="Network-Api-Arxiv.html#t:Expression">Expression</a></p><div class="doc"><p>ANDNOT operator.
   The symbol was chosen because
   1 - 1 = 0 and 1 - 0 = 1.
</p></div></div><h1 id="g:2">Expression Example
</h1><div class="doc"><p>Expressions are intended to ease the construction
     of well-formed expressions in user code. 
     A simple example:
</p><pre> let au = Exp $ Au [&quot;Knuth&quot;]
     t1 = Exp $ Ti [&quot;The Art of Computer Programming&quot;]
     t2 = Exp $ Ti [&quot;Concrete Mathematics&quot;]
     ex = au /*/ (t1 /+/ t2)
  in ...
</pre></div><h1 id="g:3">Queries
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Query" class="def">Query</a>  </p><div class="doc"><p>Query data type.
</p><p>You usually want to create a query like:
</p><pre> let e = (Exp $ Au [&quot;Aaronson&quot;]) /*/ (
           (Exp $ Ti [&quot;quantum&quot;]) /+/
           (Exp $ Ti [&quot;complexity&quot;]))
  in Query {
        qExp   = Just e,
        qIds   = [&quot;0902.3175v2&quot;,&quot;1406.2858v1&quot;,&quot;0912.3825v1&quot;],
        qStart = 0,
        qItems = 10}
</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Query" class="def">Query</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:qExp" class="def">qExp</a> :: Maybe <a href="Network-Api-Arxiv.html#t:Expression">Expression</a></dt><dd class="doc"><p>The query expression
</p></dd><dt class="src"><a name="v:qIds" class="def">qIds</a> :: [Identifier]</dt><dd class="doc"><p>Id List
</p></dd><dt class="src"><a name="v:qStart" class="def">qStart</a> :: Int</dt><dd class="doc"><p>The first item we want to see
</p></dd><dt class="src"><a name="v:qItems" class="def">qItems</a> :: Int</dt><dd class="doc"><p>The number of items we want to see
</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Query" class="caption collapser" onclick="toggleSection('i:Query')">Instances</p><div id="section.i:Query" class="show"><table><tr><td class="src">Eq <a href="Network-Api-Arxiv.html#t:Query">Query</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Show <a href="Network-Api-Arxiv.html#t:Query">Query</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:nextPage" class="def">nextPage</a> :: <a href="Network-Api-Arxiv.html#t:Query">Query</a> -&gt; <a href="Network-Api-Arxiv.html#t:Query">Query</a></p><div class="doc"><p>Fetches the next page by adding items per page to start index.
</p></div></div><div class="top"><p class="src"><a name="v:parseQuery" class="def">parseQuery</a> :: String -&gt; Either String <a href="Network-Api-Arxiv.html#t:Expression">Expression</a></p><div class="doc"><p>Parses an expression from a string.
   Please refer to the Arxiv documentation for details
   on query format.
</p><p>Just a minor remark here:
   The operators OR, AND and ANDNOT are case sensitive.
   &quot;or&quot; would be interpreted as part of a title, for instance:
   &quot;ti:object+oriented+or+functional&quot; is one title;
   &quot;ti:object+oriented+OR+functional&quot; would cause an error,
   because a field identifier (ti, au, etc.) is expected after
   &quot;+OR+&quot;.
</p><p>The other way round: the field content itself 
   is not case sensitive, i.e. 
   &quot;ti:complexity&quot; or &quot;au:aaronson&quot; is the same as
   &quot;ti:Complexity&quot; and &quot;au:Aaronson&quot; respectively.
</p><p>You may want to refer to the comments under
   |preprocess| and |exp2str| for some more details
   on our interpretation of the Arxiv documentation.
</p></div></div><div class="top"><p class="src"><a name="v:preprocess" class="def">preprocess</a> :: String -&gt; String</p><div class="doc"><p>This is an internal function used by <code><a href="Network-Api-Arxiv.html#v:parseQuery">parseQuery</a></code>.
   It may be occasionally useful for direct use:
   It replaces &quot; &quot;, &quot;(&quot;, &quot;)&quot; and &quot;&quot;&quot; 
   by &quot;+&quot;, &quot;%28&quot;, &quot;%29&quot; and &quot;%22&quot;
   respectively.
</p><p>Usually, these substitutions are performed
   when transforming a string to an URL, which should be done
   by your http library anyway (e.g. http-conduit).
   But this step is usually after parsing has been performed
   on the input string. (Considering a work flow like:
   parseQuery &gt;&gt;= mkQuery &gt;&gt;= parseUrl &gt;&gt;= execQuery.)
   The parser, however, accepts
   only the URL-encoded characters and, thus, some preprocessing
   may be necessary.
</p><p>The other way round, this means 
   that you may use parentheses, spaces and quotation marks
   instead of the URL encodings.
   But be careful! Do not introduce two successive spaces -
   we do not check for whitespace!
</p></div></div><div class="top"><p class="src"><a name="v:parseIds" class="def">parseIds</a> :: String -&gt; [Identifier]</p><div class="doc"><p>Converts a string containing comma-separated identifiers 
   into a list of <code>Identifier</code>s.
   As stated already: No whitespace! 
</p></div></div><div class="top"><p class="src"><a name="v:mkQuery" class="def">mkQuery</a> :: <a href="Network-Api-Arxiv.html#t:Query">Query</a> -&gt; String</p><div class="doc"><p>Generates the complete query string 
   including URL, 
             query expression,
             id list and 
             item control
</p></div></div><div class="top"><p class="src"><a name="v:exp2str" class="def">exp2str</a> :: <a href="Network-Api-Arxiv.html#t:Expression">Expression</a> -&gt; String</p><div class="doc"><p>Create a query string from an expression.
   Note that we create redundant parentheses,
   for instance &quot;a AND b OR c&quot; will be encoded as
   &quot;a+AND+%28b+OR+c%29&quot;.
   The rationale is that the API specification is not clear
   on how expressions are parsed.
   The above expression could be understood as
   &quot;a AND (b OR c)&quot; or as &quot;(a AND b) OR c&quot;.
   To avoid confusion, one should always use parentheses
   to group boolean expressions - even if some of these parentheses
   appear to be redundant under one or the other parsing strategy.
</p></div></div><div class="top"><p class="src"><a name="v:items2str" class="def">items2str</a> :: <a href="Network-Api-Arxiv.html#t:Query">Query</a> -&gt; String</p><div class="doc"><p>Converts the query to a string containing only the item control
</p></div></div><div class="top"><p class="src"><a name="v:ids2str" class="def">ids2str</a> :: [Identifier] -&gt; String</p><div class="doc"><p>Converts a list of <code>Identifier</code> 
   to a string with comma-separated identifiers
</p></div></div><div class="top"><p class="src"><a name="v:itemControl" class="def">itemControl</a> :: Int -&gt; Int -&gt; String</p><div class="doc"><p>Generates the item control of a query string according
   to first item and results per page:
</p><ul><li> <code>Int</code>: Start index for this page
</li><li> <code>Int</code>: Number of results per page.
</li></ul></div></div><h1 id="g:4">Response
</h1><div class="doc"><p>Response processing expects [Tag String] as input (see TagSoup).
     The result produced by your http library
     (such as http-conduit) must be converted to [Tag String]
     before the result is passed to the response functions 
     defined here (see also the example below).
</p><p>The response functions extract information from the tag soup,
     either in <code>String</code>, <code>Int</code> or TagSoup format.
</p><p>For details of the Arxiv Feed format, please refer 
     to the Arxiv documentation.
</p></div><div class="top"><p class="src"><a name="v:totalResults" class="def">totalResults</a> :: [Tag String] -&gt; Int</p><div class="doc"><p>Total results of the query
</p></div></div><div class="top"><p class="src"><a name="v:startIndex" class="def">startIndex</a> :: [Tag String] -&gt; Int</p><div class="doc"><p>Start index of this page of results
</p></div></div><div class="top"><p class="src"><a name="v:itemsPerPage" class="def">itemsPerPage</a> :: [Tag String] -&gt; Int</p><div class="doc"><p>Number of items per page
</p></div></div><div class="top"><p class="src"><a name="v:getEntry" class="def">getEntry</a> :: [Tag String] -&gt; ([Tag String], [Tag String])</p><div class="doc"><p>Get the first entry in the tag soup.
   The function returns a tuple of
</p><ul><li> The entry (if any)
</li><li> The rest of the tag soup following the first entry.
</li></ul><p>With getEntry, we can build a loop through all entries
   in the result (which is actually implemented in <code><a href="Network-Api-Arxiv.html#v:forEachEntry">forEachEntry</a></code>).
</p></div></div><div class="top"><p class="src"><a name="v:forEachEntry" class="def">forEachEntry</a> ::  [Tag String] -&gt; ([Tag String] -&gt; r) -&gt; [r]</p><div class="doc"><p>Loop through all entries in the result feed
   applying a function on each one.
   The results are returned as list.
   The function is similar to <code>map</code> 
   with the arguments swapped (as in Foldable <code>forM</code>).
</p><p>Arguments:
</p><ul><li> [<code>Tag</code> <code>String</code>]: The TagSoup through which we are looping
</li><li> [<code>Tag</code> <code>String</code>] -&gt; r: The function we are applying per entry;
                            the TagSoup passed in to the function
                            represents the current entry.
</li></ul><p>Example:
</p><pre> forEachEntry soup $ \e -&gt;
   let y = case getYear e of
             &quot;&quot; -&gt; &quot;s.a.&quot;
             x  -&gt; x
       a = case getAuthors e of
             [] -&gt; &quot;Anonymous&quot;
             as -&gt; head as ++ 
    in a ++ &quot; (&quot; ++ y ++ &quot;)&quot;
</pre><p>Would retrieve the name of the first author 
   and the year of publication (like <a href="Aaronson (2013).html">Aaronson (2013)</a>) 
   from all entries.
</p></div></div><div class="top"><p class="src"><a name="v:forEachEntryM" class="def">forEachEntryM</a> :: Monad m =&gt; [Tag String] -&gt; ([Tag String] -&gt; m r) -&gt; m [r]</p><div class="doc"><p>Variant of <code><a href="Network-Api-Arxiv.html#v:forEachEntry">forEachEntry</a></code> for monadic actions.
</p></div></div><div class="top"><p class="src"><a name="v:forEachEntryM_" class="def">forEachEntryM_</a> :: Monad m =&gt; [Tag String] -&gt; ([Tag String] -&gt; m ()) -&gt; m ()</p><div class="doc"><p>Variant of <code><a href="Network-Api-Arxiv.html#v:forEachEntryM">forEachEntryM</a></code> for actions 
   that do not return a result.
</p></div></div><div class="top"><p class="src"><a name="v:checkForError" class="def">checkForError</a> :: [Tag String] -&gt; Either String ()</p><div class="doc"><p>Checks if the feed contains an error message, i.e.
</p><ul><li> it has only one entry,
</li><li> the title of this entry is &quot;Error&quot; and
</li><li> its id field contains an error message,
         which is returned as <code>Left</code>.
</li></ul><p>Apparently, this function is not necessary,
   since the Arxiv site returns error feeds
   with status code 400 (<a href="bad request.html">bad request</a>), 
   which should be handled by your http library anyway.
</p></div></div><div class="top"><p class="src"><a name="v:exhausted" class="def">exhausted</a> :: [Tag String] -&gt; Bool</p><div class="doc"><p>Checks whether the query is exhausted or not, i.e.
   whether all pages have been fetched already.
   The first argument is the entire response (not just a part of it).
</p></div></div><div class="top"><p class="src"><a name="v:getId" class="def">getId</a> :: [Tag String] -&gt; String</p><div class="doc"><p>Gets the article identifier as it can be used
   in an &quot;id_list&quot; query, i.e. without the URL.
   The [Tag String] argument is expected to be a single entry.
</p></div></div><div class="top"><p class="src"><a name="v:getIdUrl" class="def">getIdUrl</a> :: [Tag String] -&gt; String</p><div class="doc"><p>Gets the full contents of the id field 
   (which contains an URL before the article identifier).
   The [Tag String] argument is expected to be a single entry.
</p></div></div><div class="top"><p class="src"><a name="v:getUpdated" class="def">getUpdated</a> :: [Tag String] -&gt; String</p><div class="doc"><p>Gets the contents of the &quot;update&quot; field in this entry, i.e.
   the date when the article was last updated.
</p></div></div><div class="top"><p class="src"><a name="v:getPublished" class="def">getPublished</a> :: [Tag String] -&gt; String</p><div class="doc"><p>Gets the contents of the &quot;published&quot; field in this entry, i.e.
   the date when the article was last uploaded.
</p></div></div><div class="top"><p class="src"><a name="v:getYear" class="def">getYear</a> :: [Tag String] -&gt; String</p><div class="doc"><p>Gets the year of the &quot;published&quot; field in this entry.
</p></div></div><div class="top"><p class="src"><a name="v:getTitle" class="def">getTitle</a> :: [Tag String] -&gt; String</p><div class="doc"><p>Gets the title of this entry.
</p></div></div><div class="top"><p class="src"><a name="v:getSummary" class="def">getSummary</a> :: [Tag String] -&gt; String</p><div class="doc"><p>Gets the summary of this entry.
</p></div></div><div class="top"><p class="src"><a name="v:getComment" class="def">getComment</a> :: [Tag String] -&gt; String</p><div class="doc"><p>Gets author''s comment (in &quot;arxiv:comment&quot;) of this entry.
</p></div></div><div class="top"><p class="src"><a name="v:getJournal" class="def">getJournal</a> :: [Tag String] -&gt; String</p><div class="doc"><p>Gets the journal information (in &quot;arxiv:journal_ref&quot;)
   of this entry.
</p></div></div><div class="top"><p class="src"><a name="v:getDoi" class="def">getDoi</a> :: [Tag String] -&gt; String</p><div class="doc"><p>Gets the digital object identifier (in &quot;arxiv:doi&quot;) 
   of this entry.
</p></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Link" class="def">Link</a>  </p><div class="doc"><p>The Link data type
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Link" class="def">Link</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:lnkHref" class="def">lnkHref</a> :: String</dt><dd class="doc"><p>The hyperlink
</p></dd><dt class="src"><a name="v:lnkType" class="def">lnkType</a> :: String</dt><dd class="doc"><p>The link type (a MIME type)
</p></dd><dt class="src"><a name="v:lnkTitle" class="def">lnkTitle</a> :: String</dt><dd class="doc"><p>The link title (e.g. &quot;pdf&quot; would be the link
                        where we find the article 
                        in pdf format)
</p></dd><dt class="src"><a name="v:lnkRel" class="def">lnkRel</a> :: String</dt><dd class="doc"><p>the link relation (e.g. &quot;related&quot; would point
                           to the related information,
                           such as the pdf document)
</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Link" class="caption collapser" onclick="toggleSection('i:Link')">Instances</p><div id="section.i:Link" class="show"><table><tr><td class="src">Eq <a href="Network-Api-Arxiv.html#t:Link">Link</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Show <a href="Network-Api-Arxiv.html#t:Link">Link</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:getLinks" class="def">getLinks</a> :: [Tag String] -&gt; [<a href="Network-Api-Arxiv.html#t:Link">Link</a>]</p><div class="doc"><p>Gets all links in the entry.
</p></div></div><div class="top"><p class="src"><a name="v:getPdfLink" class="def">getPdfLink</a> :: [Tag String] -&gt; Maybe <a href="Network-Api-Arxiv.html#t:Link">Link</a></p><div class="doc"><p>Gets only the pdf link of this entry (if any).
</p></div></div><div class="top"><p class="src"><a name="v:getPdf" class="def">getPdf</a> :: [Tag String] -&gt; String</p><div class="doc"><p>Gets the hyperlink to the pdf document of this entry (if any).
</p></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Category" class="def">Category</a>  </p><div class="doc"><p>Category data type
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Category" class="def">Category</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:catTerm" class="def">catTerm</a> :: String</dt><dd class="doc"><p>The category term (e.g. &quot;math-ph&quot;)
</p></dd><dt class="src"><a name="v:catScheme" class="def">catScheme</a> :: String</dt><dd class="doc"><p>The category scheme
</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Category" class="caption collapser" onclick="toggleSection('i:Category')">Instances</p><div id="section.i:Category" class="show"><table><tr><td class="src">Eq <a href="Network-Api-Arxiv.html#t:Category">Category</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Show <a href="Network-Api-Arxiv.html#t:Category">Category</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:getCategories" class="def">getCategories</a> :: [Tag String] -&gt; [<a href="Network-Api-Arxiv.html#t:Category">Category</a>]</p><div class="doc"><p>Gets the categories of this entry.
</p></div></div><div class="top"><p class="src"><a name="v:getPrimaryCategory" class="def">getPrimaryCategory</a> :: [Tag String] -&gt; Maybe <a href="Network-Api-Arxiv.html#t:Category">Category</a></p><div class="doc"><p>Gets the primary category of this entry (if any).
</p></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Author" class="def">Author</a>  </p><div class="doc"><p>The Author data type
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Author" class="def">Author</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:auName" class="def">auName</a> :: String</dt><dd class="doc"><p>Author name
</p></dd><dt class="src"><a name="v:auFil" class="def">auFil</a> :: String</dt><dd class="doc"><p>Author Affiliation
</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Author" class="caption collapser" onclick="toggleSection('i:Author')">Instances</p><div id="section.i:Author" class="show"><table><tr><td class="src">Eq <a href="Network-Api-Arxiv.html#t:Author">Author</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Show <a href="Network-Api-Arxiv.html#t:Author">Author</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:getAuthors" class="def">getAuthors</a> :: [Tag String] -&gt; [<a href="Network-Api-Arxiv.html#t:Author">Author</a>]</p><div class="doc"><p>Gets the authors of this entry.
</p></div></div><div class="top"><p class="src"><a name="v:getAuthorNames" class="def">getAuthorNames</a> :: [Tag String] -&gt; [String]</p><div class="doc"><p>Gets the names of all authors of this entry.
</p></div></div><h1 id="g:5">A complete Example using http-conduit
</h1><div class="doc"><pre> module Main
 where
 
   import qualified Network.Api.Arxiv as Ax
   import           Network.Api.Arxiv (Expression(..), 
                                       Field(..), (/*/), (/+/))
   import           Network (withSocketsDo)
   import           Network.HTTP.Conduit
   import           Network.HTTP.Types.Status
   import           Data.List (intercalate)
   import qualified Data.ByteString as B hiding (unpack) 
   import qualified Data.ByteString.Char8 as B  (unpack) 
   import           Data.Conduit (($$+-), (=$), ($$))
   import qualified Data.Conduit as C
   import qualified Data.Conduit.List as CL
   import           Text.HTML.TagSoup
   import           Control.Monad.Trans (liftIO)
   import           Control.Monad.Trans.Resource (MonadResource)
   import           Control.Applicative ((&lt;$&gt;))
 
   main :: IO ()
   main = withSocketsDo (execQuery makeQuery)
     
   makeQuery :: Ax.Query
   makeQuery = 
     let au = Exp $ Au [&quot;Aaronson&quot;]
         t1 = Exp $ Ti [&quot;quantum&quot;]
         t2 = Exp $ Ti [&quot;complexity&quot;]
         x  = au /*/ (t1 /+/ t2)
      in Ax.Query {
           Ax.qExp   = Just x,
           Ax.qIds   = [],
           Ax.qStart = 0,
           Ax.qItems = 25}
 
   type Soup = Tag String
 
   execQuery :: Ax.Query -&gt; IO ()
   execQuery q = withManager $ \m -&gt; searchAxv m q $$ outSnk
 
   -----------------------------------------------------------------
   -- Execute query and start a source
   -----------------------------------------------------------------
   searchAxv :: MonadResource m =&gt;
                Manager -&gt; Ax.Query -&gt; C.Source m String
   searchAxv m q = 
     let s = Ax.mkQuery q
      in do u   &lt;- liftIO (parseUrl s)
            rsp &lt;- http u m 
            case responseStatus rsp of
              (Status 200 _) -&gt; getSoup rsp &gt;&gt;= results m q 
              st             -&gt; error $ &quot;Error:&quot; ++ show st
 
   -----------------------------------------------------------------
   -- Consume page by page
   -----------------------------------------------------------------
   getSoup :: MonadResource m =&gt; 
              Response (C.ResumableSource m B.ByteString) -&gt; m [Soup]
   getSoup rsp = concat &lt;$&gt; (responseBody rsp $$+- 
                                       toSoup =$ CL.consume)
 
   -----------------------------------------------------------------
   -- Receive a ByteString and yield Soup
   -----------------------------------------------------------------
   toSoup :: MonadResource m =&gt; C.Conduit B.ByteString m [Soup] 
   toSoup = C.awaitForever (C.yield . parseTags . B.unpack)
 
   ------------------------------------------------------------------
   -- Yield all entries and fetch next page
   ------------------------------------------------------------------
   results :: MonadResource m =&gt; 
              Manager -&gt; Ax.Query -&gt; [Soup] -&gt; C.Source m String
   results m q sp = 
      if Ax.exhausted sp 
        then C.yield (&quot;EOT: &quot; ++ show (Ax.totalResults sp) ++ 
                      &quot; results&quot;)
        else Ax.forEachEntryM_ sp (C.yield . mkResult) 
             &gt;&gt; searchAxv m (Ax.nextPage q)
   
   ------------------------------------------------------------------
   -- Get data and format somehow
   ------------------------------------------------------------------
   mkResult :: [Soup] -&gt; String
   mkResult sp = let aus = Ax.getAuthorNames sp
                     y   = Ax.getYear sp
                     tmp = Ax.getTitle sp
                     ti  = if null tmp then &quot;No title&quot; else tmp
                  in intercalate &quot;, &quot; aus ++ &quot; (&quot; ++ y ++ &quot;): &quot; ++ ti
 
   ------------------------------------------------------------------
   -- Sink results 
   ------------------------------------------------------------------
   outSnk :: MonadResource m =&gt; C.Sink String m ()
   outSnk = C.awaitForever (liftIO . putStrLn) 
</pre></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>